<template>
    <div class="likeBtn" @click.stop="cancel">
        <svg v-if="show" class="icon" width="32px" height="32.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M 983.384 381.465 c 0 -147.456 -119.467 -266.923 -266.923 -266.923 c -81.4649 0 -154.283 36.4089 -203.207 93.8662 c -48.9245 -57.4578 -121.856 -93.8662 -203.207 -93.8662 c -147.456 0 -266.923 119.467 -266.923 266.923 c 0 77.3689 35.6125 142.109 85.5609 195.811 L 514.275 947.964 l 378.994 -366.592 c 48.0142 -50.0622 90.112 -120.377 90.112 -199.907 Z" fill="#d1525c" /><path d="M 514.275 947.964 L 128.569 577.276 C 78.507 523.574 43.008 458.835 43.008 381.465 c 0 -147.456 119.467 -266.923 266.923 -266.923 c 81.4649 0 154.283 36.4089 203.207 93.8662 l 1.13778 739.555 Z" fill="#db6574" /></svg>
        <svg v-else class="icon" width="32px" height="32.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#ffffff" d="M695.30624 143.44192c-41.85088 7.28576-76.5184 20.25472-105.76384 40.01792l-30.00832 24.2944-47.16544 47.16544C445.07648 203.27936 416.09728 139.9808 290.83648 142.00832l-52.87936 8.576c-45.00992 13.68064-88.192 39.87456-114.33984 72.89344-15.35488 19.38944-30.36672 42.7008-40.01792 67.1744-56.9856 144.5376 41.74848 234.69056 108.6208 301.568l117.1968 115.7632 144.35328 142.9248c17.43872 14.08512 30.55616 38.17984 68.60288 31.44704 45.5424-8.064 93.2608-74.69056 122.91072-104.33536a2629899.9808 2629899.9808 0 0 1 170.07616-168.64768c52.47488-52.46976 111.60064-96.25088 134.3488-178.65216 43.14112-156.30336-101.55008-313.90208-254.40256-287.27808z m184.36608 314.42432c-22.13888 37.94432-57.02656 65.60256-87.17312 95.75936-56.68864 56.2176-113.38752 112.44032-170.08128 168.64768-15.55968 15.55456-95.83104 104.43776-110.04928 102.90688-14.14656 1.25952-33.00352-27.35616-42.88-37.16096l-114.33472-112.91136c-46.68928-46.19776-93.38368-92.42624-140.0576-138.63424-27.06944-27.06432-59.50976-52.54144-75.76064-90.0352-28.83072-66.52928-7.79264-149.32992 30.01856-190.09024 21.36576-23.04 51.52256-43.21792 85.75488-52.87936 12.38016-1.90464 24.76544-3.8144 37.15584-5.71392 71.44448 0.31232 87.64928 26.24512 131.48672 47.16032l88.61184 88.61184c45.78816-35.10784 76.7488-89.99424 130.05824-117.1968 116.6592-59.52 231.63392 24.5248 254.40256 121.48736 9.91232 42.18368-1.33632 92.96384-17.152 120.04864z"  /></svg>
    </div>
</template>
<script>
export default {
    props:['rid',"nowCheck"],
    data(){
        return{
            show:false,
        }
    },
    created(){
        this.show=this.nowCheck
    },
    methods:{
        cancel(){
            var userinfo=this.$store.getters.getInfo
            if(!userinfo.uid){
                this.$toast({
                    message:"未登录",
                    duration:1000
                })
            }else{
                if(this.show){
                    this.$messagebox.confirm("是否取消喜欢").then(res=>{
                        this.show=false
                        this.axios.get('like/like_del',{params:{rid:this.rid}}).then(res=>{
                            if(res.data.code==1){
                                this.$emit('closeThis',this.rid)
                                setTimeout(()=>{
                                    this.$toast({
                                        message:'删除成功',
                                        duration:1000
                                    })
                                },400)
                            }else{
                                this.show=true
                            }
                        })
                    }).catch(err=>this.$toast({
                        message:"取消成功",
                        duration:1000    
                    }))
                }else{
                    this.show=true
                    this.axios.get('like/like_add',{params:{
                        rid:this.rid
                    }})
                }
            }
        }
    }
}
</script>
<style>
    .likeBtn{
        position:absolute;
        top:10px;
        right:20px;
        z-index:1;
    }
</style>

